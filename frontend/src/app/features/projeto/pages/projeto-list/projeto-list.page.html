<h2>Projects</h2>

<ng-container *ngIf="projetos$ | async as p">
  <div *ngIf="p.status === 'loading'">Carregando...</div>
  <div *ngIf="p.status === 'error'" style="color: red;">{{ p.message }}</div>

  <table *ngIf="p.status === 'success'" border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>ID</th>
      <th>Nome</th>
      <th>Descrição</th>
      <th>ações</th>
    </tr>
  </thead>
  <tbody>
    
        <tr *ngFor="let p of p.data">
          <td>{{ p?.id }}</td>
          <td>{{ p?.name }}</td>
          <td>{{ p?.description }}</td>
          <td>
            <button type="button" (click)="openEditModal(p)">Editar</button>
            <button type="button" (click)="openDeleteModal(p.id)">Excluir</button>
          </td>
        </tr>
        <tr *ngIf="p.data.length === 0">
          <td colspan="3">Nenhum projeto encontrado.</td>
        </tr>

  </tbody>
</table>
</ng-container>

<app-projeto-create  (created)="refresh$.next()"></app-projeto-create>

<app-projeto-edit   *ngIf="showEditModal"
  [project]="selectedProject"
  (updated)="refresh$.next()"
  (close)="closeEditModal()"></app-projeto-edit>

<app-projeto-delete *ngIf="showDeleteModal"
  [projectId]="projectIdToDelete"
  (deleted)="refresh$.next()"
  (close)="closeDeleteModal()"></app-projeto-delete>
  
